(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{457:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return t(2238)}])},2238:function(e,r,t){"use strict";t.r(r),t.d(r,{Search:function(){return _},__N_SSP:function(){return g},default:function(){return y}});var n=t(8788),u=t(930),s=t(5163),a=t(2322),c=t(434),o=t(4256),i=t(9140),l=t(2784),f=t(4953),h=t(865),v=t(6670),d=t(2285),p=function(e,r){return e.map((function(e){return function(e,r){var t=(null===e||void 0===e?void 0:e.html_url)?(0,d.KX)(null===e||void 0===e?void 0:e.html_url):"",n="/".concat(r,"/").concat(t);return(0,v.Z)((0,h.Z)({},e),{slug:t,url:n})}(e,r)}))},g=!0;function _(e){var r=e.searchResults,t=void 0===r?[]:r,h=e.userQueryByUrl,v=void 0===h?null:h,d=e.nextPageIndexInitial,g=void 0===d?null:d,_=e.errorMessage,y=void 0===_?null:_,x=e.hostUrl,S=(0,l.useState)(t),w=S[0],b=S[1],P=(0,l.useState)(y?"rejected":"idle"),I=P[0],U=P[1],Z=(0,l.useState)(!1),R=Z[0],m=Z[1],q=(0,l.useState)(v),j=q[0],T=q[1],E=(0,l.useState)(g),N=E[0],C=E[1];y&&console.error(y);var L=function(){var e=(0,n.Z)((function(e){var r,t,n,a;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:if(e.preventDefault(),"pending"===I||R)return[2];s.label=1;case 1:return s.trys.push([1,3,,4]),m(!0),console.log(j),[4,(0,f.f)({query:encodeURIComponent(j),pageIndex:N,hostUrl:x})];case 2:return r=s.sent(),t=r.searchResults,n=r.nextPageIndex,b((0,u.Z)(w).concat((0,u.Z)(t))),m(!1),C(n),[3,4];case 3:return a=s.sent(),m(!1),console.log(a.message),[3,4];case 4:return[2]}}))}));return function(r){return e.apply(this,arguments)}}();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.u,{title:"Results for: \u201c".concat(j,"\u201d")}),(0,a.jsxs)(c.NP,{children:[(0,a.jsx)(i.H,{mobAlign:"left",initialQuery:j,setSearchResultsData:b,setUserQuery:T,setLoadingStatus:U,setNextPageIndex:C,resultsCount:w.length,isSearchResults:!0,hostUrl:x}),(0,a.jsx)(c.lt,{links:p(w,"articles"),query:j,loadingStatus:I,isLoadingMore:R,handleLoadMore:L,nextPageIndex:N})]})]})}var y=_},4953:function(e,r,t){"use strict";t.d(r,{f:function(){return c}});var n=t(8788),u=t(5163),s=t(7855),a=t(2285),c=(function(){var e=(0,n.Z)((function(e){var r,t;return(0,u.__generator)(this,(function(n){switch(n.label){case 0:r="articles/search.json?query=".concat(e.query),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,(0,a.uZ)().get({url:r})];case 2:return[2,{success:!0,response:n.sent()}];case 3:return t=n.sent(),console.error("getSearchResultsByPage:",t),[2,{success:!1}];case 4:return[2]}}))}))}(),function(){var e=(0,n.Z)((function(e){var r,t,n,a,c;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:r=e.query,t=e.pageIndex,n=void 0===t?1:t,a=e.hostUrl,u.label=1;case 1:if(u.trys.push([1,3,,4]),!a)throw new Error("Wrong hostUrl provided");return[4,fetch("".concat(s.sv,"://").concat(a,"/api/search?query=").concat(r,"&page=").concat(n,"&per_page=25"))];case 2:return[2,u.sent().json()];case 3:return c=u.sent(),console.error("connectSearchAPI:",c),[2,{errorMessage:"connectSearchAPI: ".concat(c)}];case 4:return[2]}}))}));return function(r){return e.apply(this,arguments)}}())},9140:function(e,r,t){"use strict";t.d(r,{H:function(){return f}});var n=t(8788),u=t(865),s=t(6670),a=t(5163),c=t(2322),o=t(434),i=t(5632),l=t(4953);var f=function(e){var r=(0,i.useRouter)(),t=e.setLoadingStatus,f=e.setSearchResultsData,h=e.setUserQuery,v=e.setNextPageIndex,d=e.hostUrl,p=function(){var e=(0,n.Z)((function(e){var n,u,s,c,o,i,p,g,_;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if(e.preventDefault(),!(s=null===e||void 0===e||null===(n=e.target)||void 0===n||null===(u=n.query)||void 0===u?void 0:u.value))return[2];if(!(null===s||void 0===s?void 0:s.replace(/\s/g,"").length))return e.target.query.value="",[2];if(c=encodeURIComponent(s),r.push("/search?query=".concat(c)),"/search"!==r.route)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),t("pending"),[4,(0,l.f)({query:encodeURIComponent(s),hostUrl:d})];case 2:if(o=a.sent(),i=o.searchResults,p=o.nextPageIndex,g=o.errorMessage)throw new Error(g);return f(i||[]),h(s),v(p),t("fullfilled"),[3,4];case 3:return _=a.sent(),t("rejected"),console.log(_.message),[3,4];case 4:return[2]}}))}));return function(r){return e.apply(this,arguments)}}();return(0,c.jsx)(o.Tu,(0,s.Z)((0,u.Z)({},e),{handleSubmit:p}))}},7855:function(e,r,t){"use strict";t.d(r,{T5:function(){return u},sv:function(){return s}});var n=t(4406),u=n.env.API_URL,s=n.env.HOST_PROTOCOL||"https";n.env.HOST_URL},2285:function(e,r,t){"use strict";t.d(r,{uZ:function(){return f},KX:function(){return v}});var n=t(8788),u=t(930),s=t(5163),a=t(7855),c=t(4406),o=t(8834).lW,i=function(){var e="".concat("support@feature.fm",":").concat(c.env.API_KEY),r=o.from(e).toString("base64");return new Headers({Authorization:"Basic ".concat(r),"Content-Type":"application/json"})},l=function(e){return"".concat(a.T5).concat(e)},f=function(){var e=function(){var e=(0,n.Z)((function(e){var r,t,n,u;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:r=e.url,t=e.fullUrl,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,fetch(t||l(r),{headers:i()})];case 2:if((n=s.sent()).ok)return[2,n.json()];throw new Error("HTTP error ".concat(n.statusText,", status = ").concat(n.status));case 3:return u=s.sent(),console.error(u),[3,4];case 4:return[2]}}))}));return function(r){return e.apply(this,arguments)}}();return{get:e}},h=function(){var e=(0,n.Z)((function(e){var r,t,n,u;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:r=e.page,t=e.query,s.label=1;case 1:return s.trys.push([1,3,,4]),n="".concat(t,"?page=").concat(r),[4,f().get({url:n})];case 2:return[2,{response:s.sent()}];case 3:return u=s.sent(),console.error(u),[3,4];case 4:return[2]}}))}));return function(r){return e.apply(this,arguments)}}(),v=(function(){var e=(0,n.Z)((function(e){var r,t,n,a,c,o,i,l,f;return(0,s.__generator)(this,(function(s){switch(s.label){case 0:r=e.type,t=e.query,n=e.startPage,a=e.endPage,c=n,o=a||c,i=[],s.label=1;case 1:return c<=o?[4,h({page:c,query:t})]:[3,3];case 2:return(l=s.sent().response)&&l[r]&&((f=i).push.apply(f,(0,u.Z)(l[r])),o=null===l||void 0===l?void 0:l.page_count),c++,[3,1];case 3:return[2,i]}}))}))}(),function(e){return/[^/]*$/.exec(e)[0]})}},function(e){e.O(0,[961,774,888,179],(function(){return r=457,e(e.s=r);var r}));var r=e.O();_N_E=r}]);